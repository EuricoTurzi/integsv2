<!-- edit_profile.html -->
{% extends 'base.html' %}

{% block title %}Editar o Perfil{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">Edit Profile</div>
            <div class="card-body">
                <form method="POST">
                    {{ form.hidden_tag() }}
                    <div class="form-group">
                        {{ form.email.label(class="form-control-label") }}
                        {{ form.email(class="form-control") }}
                    </div>
                    <div class="form-group">
                        {{ form.profile_picture.label(class="form-control-label") }}
                        <select name="profile_picture" id="profilePictureSelect" class="form-control">
                            <option value="logo-int.png">Foto 1</option>
                            <option value="logo-perfil.png">Foto 2</option>
                            <option value="logo-perfil2.jpeg">Foto 3</option>
                            <option value="logo-perfil3.jpeg">Foto 4</option>
                            <option value="logo-perfil4.jpeg">Foto 5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <img id="profilePicturePreview" src="" alt="Prévia da foto de perfil" style="max-width: 150px; display: block; margin: 0 auto;">
                    </div>
                    <div class="form-group">
                        {{ form.additional_info.label(class="form-control-label") }}
                        {{ form.additional_info(class="form-control") }}
                    </div>
                    <a href="{{ url_for('change_password') }}" class="btn btn-secondary">Trocar a senha</a>
                    <button type="submit" class="btn btn-primary">Salvar alterações</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    const profilePictureSelect = document.getElementById('profilePictureSelect');
    const profilePicturePreview = document.getElementById('profilePicturePreview');

    // Define a imagem inicial (foto1.jpg)
    const initialImagePath = '/static/img/logo-int.png'; // Substitua pelo caminho correto
    profilePicturePreview.src = initialImagePath;

    profilePictureSelect.addEventListener('change', () => {
        const selectedValue = profilePictureSelect.value;
        const imagePath = `/static/img/${selectedValue}`; // Substitua pelo caminho correto

        profilePicturePreview.src = imagePath;
    });
</script>
{% endblock %}
